# JavaScript 数据类型和运算符

## 数据类型概述

JavaScript 是一种动态类型语言，变量可以存储不同类型的数据。JavaScript 的数据类型可以分为两大类：**原始类型**和**引用类型**。

## 原始类型

原始类型（Primitive Types）是直接存储数据值的类型，JavaScript 中的原始类型包括：

### 1. 基本原始类型

- **Undefined**：表示未定义的值
- **Null**：表示空值
- **Boolean**：表示布尔值（true/false）
- **Number**：表示数字（包括整数和浮点数）
- **String**：表示字符串

### 2. ES6 新增的原始类型

- **Symbol**：代表独一无二的值，最大的用法是为对象定义唯一的属性名
- **BigInt**：可表示任意大小的整数，用于安全存储和操作大整数

## 引用类型

引用类型（Reference Types）存储的是对数据的引用，JavaScript 中的引用类型主要包括：

- **Object**：对象类型
- **Array**：数组类型
- **Date**：日期类型
- **RegExp**：正则表达式类型
- **Function**：函数类型

## 数据类型转换

JavaScript 中常用的数据类型转换方法包括：

### 1. 转换为数字

#### parseInt()

- 解析一个字符串，并返回一个整数
- 只保留整数部分，有基模式
- 逐个解析字符，遇到不能转换的字符就停下来

```javascript


parseInt('123abc'); // 返回 123
parseInt('5.4');    // 返回 5
parseInt('0x10');   // 返回 16（十六进制）
parseInt('10', 2);  // 返回 2（二进制）
```



**语法**：`parseInt(string, radix)`
- `string`：必需，表示要被解析的字符串
- `radix`：可选，表示要解析的数字的基数（2 ~ 36 之间）
- 如果省略 `radix` 或其值为 0，则数字将以 10 为基础来解析
- 如果字符串以 '0x' 或 '0X' 开头，将以 16 为基数
- 如果 `radix` 小于 2 或者大于 36，则 `parseInt()` 将返回 `NaN`

#### parseFloat()

- 把值转换成浮点数
- 没有基模式

```javascript


parseFloat('3.14');    // 返回 3.14
parseFloat('3.14abc'); // 返回 3.14
```



#### Number()

- 把给定的值转换成数字（可以是整数或浮点数）
- 转换整个值，而不是部分值

```javascript


Number('123');    // 返回 123
Number('123abc'); // 返回 NaN
Number(true);     // 返回 1
Number(null);     // 返回 0
Number(undefined); // 返回 NaN
```



### 2. 数学函数相关转换

```javascript


Math.floor(4.33); // 向下取整，返回 4
Math.ceil(6.7);   // 向上取整，返回 7
Math.round(6.19); // 四舍五入，返回 6
Math.round(6.5);  // 四舍五入，返回 7
Math.abs(-1);     // 绝对值，返回 1
```



### 3. 转换为字符串

#### String()

- 把给定的值转换成字符串

```javascript


String(123);      // 返回 '123'
String(true);     // 返回 'true'
String(null);     // 返回 'null'
String(undefined); // 返回 'undefined'
```



#### toString()

- 几乎所有值都有 `toString()` 方法，可以将值转换为字符串

```javascript


(123).toString();      // 返回 '123'
true.toString();       // 返回 'true'
[1, 2, 3].toString();  // 返回 '1,2,3'
```



### 4. 保留小数位

#### toFixed()

- 将数字转换为字符串，并保留指定的小数位数（四舍五入）

```javascript


(3.14159).toFixed(2); // 返回 '3.14'
(3.145).toFixed(2);   // 返回 '3.15'
```



## null 和 undefined 的区别

这两个基本数据类型分别都只有一个值，就是 `undefined` 和 `null`。

### 主要区别

- **undefined**：代表的含义是未定义，一般变量声明了但还没有定义的时候会返回 undefined
- **null**：代表的含义是空对象，主要用于赋值给一些可能会返回对象的变量，作为初始化

### 注意事项

- `undefined` 在 JavaScript 中不是一个保留字，我们可以使用 `undefined` 来作为一个变量名，这样的做法非常危险
- 可以通过 `void 0` 来获得安全的 undefined 值
- 当使用 `typeof` 对 `null` 进行判断时，会返回 `"object"`，这是一个历史遗留问题
- 使用双等号（`==`）比较 `null` 和 `undefined` 时会返回 `true`，使用三个等号（`===`）时会返回 `false`

```javascript


null == undefined; // true
null === undefined; // false
typeof null; // "object"
typeof undefined; // "undefined"
```



## typeof null 为 "object" 的历史原因

在第一版 JavaScript 中，变量的值被设计保存在一个 32 位内存单元中。该单元包含一个 1 或 3 位的类型标志，和实际数据值。类型标志存储在单元的最后三位：

- `000`：object，数据为对象的引用
- `1`：int，数据为 31 位的有符号整型
- `010`：double，数据为一个双精度浮点数的引用
- `100`：string，数据为一个字符串的引用
- `110`：boolean，数据为布尔类型的值

**特殊情况**：
- `undefined`：负的 2 的 30 次方（超出当时整型取值范围的一个数）
- `null`：空指针

由于 `null` 的存储单元最后三位（即标志位）和 object 一样，所以被误判为 Object，这是 JavaScript 语言设计的一个历史遗留问题。

## 总结

JavaScript 的数据类型系统包括原始类型和引用类型，了解这些类型的特点和转换方法对于编写高质量的 JavaScript 代码至关重要。同时，理解 `null` 和 `undefined` 等特殊值的行为也是掌握 JavaScript 的重要部分。
